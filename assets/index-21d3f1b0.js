var P=Object.defineProperty;var L=(i,e,t)=>e in i?P(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var c=(i,e,t)=>(L(i,typeof e!="symbol"?e+"":e,t),t);import{d as E,r as D,s as x,o as S,a as _,c as C,b as U,e as M,F as O,p as V,f as H,w as k,u as y,g as B,R as N,i as F,h as G,j as W,k as $}from"./vendor-363fc975.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function t(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(s){if(s.ep)return;s.ep=!0;const n=t(s);fetch(s.href,n)}})();const g=window.Cesium.Cartesian3,u=window.Cesium.ScreenSpaceEventHandler,p=window.Cesium.ScreenSpaceEventType,b=window.Cesium.HeightReference,h=window.Cesium.Color,z=window.Cesium.ConstantPositionProperty,I=window.Cesium.Cartographic,K=window.Cesium.Ellipsoid,R=window.Cesium.Math,j=window.Cesium.ReferenceFrame,f=(i,e)=>{const t=e.pickPositionSupported;let o=null;if(t)return o=e.pickPosition(i,new g),console.log(Q(o)),o;{const s=e.camera.getPickRay(i);if(s){const n=e.globe.pick(s,e,new g);return n||o}else{const n=e.camera.pickEllipsoid(i,e.globe.ellipsoid,new g);return n||o}}},w=new I(0,0,0),Q=i=>{I.fromCartesian(i,K.WGS84,w);const e=w.longitude*R.DEGREES_PER_RADIAN,t=w.latitude*R.DEGREES_PER_RADIAN;return[e,t,w.height]};class q{constructor(e){c(this,"viewer");c(this,"eventHandlers");c(this,"status");c(this,"drawType");c(this,"handlers");c(this,"oldDepthTestValue",!1);this.viewer=e,this.eventHandlers={},this.status=!1,this.handlers=new Map,this.oldDepthTestValue=e.scene.globe.depthTestAgainstTerrain,e.scene.globe.depthTestAgainstTerrain=!0}beginPoint(){const e=this.viewer,t=e.scene,o=t.canvas,s=e.entities,n=()=>({color:h.ALICEBLUE,outlineColor:h.AQUA,outlineWidth:2,pixelSize:4,disableDepthTestDistance:5e4,heightReference:b.RELATIVE_TO_GROUND,show:!0}),r=()=>({color:h.ALICEBLUE,outlineColor:h.AQUA,outlineWidth:2,pixelSize:4,disableDepthTestDistance:0,heightReference:b.RELATIVE_TO_GROUND,show:!0}),m=new z;s.add({id:"movePoint",point:n(),position:m});let l,d;this.handlers.has("point-move")?l=this.handlers.get("point-move"):(l=new u(o),this.handlers.set("point-move",l)),this.handlers.has("point")?d=this.handlers.get("point"):(d=new u(o),this.handlers.set("point",d)),d.setInputAction(v=>{const a=f(v.position,t);if(a)s.add({point:r(),position:a});else return},p.LEFT_CLICK),l.setInputAction(v=>{const a=f(v.endPosition,t);if(a)m.setValue(a,j.FIXED);else return},p.MOUSE_MOVE)}beginLine(){const t=this.viewer.scene,o=t.canvas;let s;this.handlers.has("line")?s=this.handlers.get("line"):(s=new u(o),this.handlers.set("line",s)),s.setInputAction(n=>{const r=f(n.position,t);if(r)console.log(r);else return},p.LEFT_CLICK)}beginPolygon(){const t=this.viewer.scene,o=t.canvas;let s;this.handlers.has("line")?s=this.handlers.get("line"):(s=new u(o),this.handlers.set("line",s)),s.setInputAction(n=>{const r=f(n.position,t);if(r)console.log(r);else return},p.LEFT_CLICK)}begin(e){switch(this.status=!0,this.drawType=e.type,e.type){case"point":this.beginPoint();break;case"line":this.beginLine();break;case"polygon":this.beginPolygon();break}return this}end(){this.status=!1,this.drawType=void 0;for(const[e,t]of this.handlers)t.destroy();for(const[e,t]of Object.entries(this.eventHandlers))t.forEach(o=>{o({})})}addEventListener(e,t){this.eventHandlers[e].push(t)}destroy(){this.status=!1,this.viewer.scene.globe.depthTestAgainstTerrain=this.oldDepthTestValue;for(const[e,t]of Object.entries(this.eventHandlers))t.length=0}}const X=window.Cesium.Camera,J=window.Cesium.Rectangle,Y=()=>{X.DEFAULT_VIEW_RECTANGLE=J.fromDegrees(104.5,20.5,112,26.5)};const Z=window.Cesium.TileMapServiceImageryProvider,ee=window.Cesium.Viewer,te=window.Cesium.buildModuleUrl,se=E({__name:"index",setup(i){const e=D(),t=x(),o="production",n="https://npm.elemecdn.com/cesium@1.104.0/Build/Cesium/";return window.CESIUM_BASE_URL=n,console.log(`模式: ${o}, CESIUM_BASE_URL: ${n}`),V(A,t),S(async()=>{Y(),t.value=new ee(e.value,{infoBox:!1,selectionIndicator:!1,msaaSamples:4,imageryProvider:new Z({url:te("Assets/Textures/NaturalEarthII")})})}),(r,m)=>(_(),C(O,null,[U(r.$slots,"router-view",{},void 0,!0),M("div",{id:"cesium-viewer",ref_key:"viewerDivRef",ref:e},null,512)],64))}});const T=(i,e)=>{const t=i.__vccOpts||i;for(const[o,s]of e)t[o]=s;return t},ne=T(se,[["__scopeId","data-v-7f89b9a9"]]),A=Symbol("CESIUM_VIEWER"),oe=E({__name:"App",setup(i){return(e,t)=>(_(),H(y(ne),null,{"router-view":k(()=>[B(y(N))]),_:1}))}}),ie={},re={style:{position:"absolute",top:"50px",left:"50px",color:"aliceblue","z-index":"3"}};function ce(i,e){return _(),C("div",re," Root ")}const ae=T(ie,[["render",ce]]),le={style:{position:"absolute",top:"50px",left:"50px",color:"aliceblue","z-index":"3"}},de=E({__name:"index",setup(i){const e=F(A);return S(()=>{if(!e)return;new q(e.value).begin({type:"point"})}),(t,o)=>(_(),C("div",le," TestInfoPane "))}}),ue="/zoucaa",pe=G({history:W(ue),routes:[{path:"/",name:"root",component:ae},{path:"/test",name:"test",component:de}]});$(oe).use(pe).mount("#app");
