var k=Object.defineProperty;var B=(i,e,n)=>e in i?k(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n;var a=(i,e,n)=>(B(i,typeof e!="symbol"?e+"":e,n),n);import{d as u,r as M,s as b,o as L,a as p,c as y,b as O,e as d,F as H,p as V,f as N,g as F,h as P,u as c,R as $,i as W,j as z,w as G,t as T,k as D,l as j,m as K,n as q,q as Q,v as X}from"./vendor-70626226.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function n(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(t){if(t.ep)return;t.ep=!0;const s=n(t);fetch(t.href,s)}})();const R=window.Cesium.Cartesian3,m=window.Cesium.ScreenSpaceEventHandler,f=window.Cesium.ScreenSpaceEventType,S=window.Cesium.HeightReference,v=window.Cesium.Color,J=window.Cesium.ConstantPositionProperty,A=window.Cesium.Cartographic,Y=window.Cesium.Ellipsoid,I=window.Cesium.Math,Z=window.Cesium.ReferenceFrame,w=(i,e)=>{const n=e.pickPositionSupported;let o=null;if(n)return o=e.pickPosition(i,new R),console.log(ee(o)),o;{const t=e.camera.getPickRay(i);if(t){const s=e.globe.pick(t,e,new R);return s||o}else{const s=e.camera.pickEllipsoid(i,e.globe.ellipsoid,new R);return s||o}}},g=new A(0,0,0),ee=i=>{A.fromCartesian(i,Y.WGS84,g);const e=g.longitude*I.DEGREES_PER_RADIAN,n=g.latitude*I.DEGREES_PER_RADIAN;return[e,n,g.height]};class te{constructor(e){a(this,"viewer");a(this,"eventHandlers");a(this,"status");a(this,"drawType");a(this,"handlers");a(this,"oldDepthTestValue",!1);this.viewer=e,this.eventHandlers={},this.status=!1,this.handlers=new Map,this.oldDepthTestValue=e.scene.globe.depthTestAgainstTerrain,e.scene.globe.depthTestAgainstTerrain=!0}beginPoint(){const e=this.viewer,n=e.scene,o=n.canvas,t=e.entities,s=()=>({color:v.ALICEBLUE,outlineColor:v.AQUA,outlineWidth:2,pixelSize:4,disableDepthTestDistance:5e4,heightReference:S.RELATIVE_TO_GROUND,show:!0}),r=()=>({color:v.ALICEBLUE,outlineColor:v.AQUA,outlineWidth:2,pixelSize:4,disableDepthTestDistance:0,heightReference:S.RELATIVE_TO_GROUND,show:!0}),C=new J;t.add({id:"movePoint",point:s(),position:C});let h,_;this.handlers.has("point-move")?h=this.handlers.get("point-move"):(h=new m(o),this.handlers.set("point-move",h)),this.handlers.has("point")?_=this.handlers.get("point"):(_=new m(o),this.handlers.set("point",_)),_.setInputAction(E=>{const l=w(E.position,n);if(l)t.add({point:r(),position:l});else return},f.LEFT_CLICK),h.setInputAction(E=>{const l=w(E.endPosition,n);if(l)C.setValue(l,Z.FIXED);else return},f.MOUSE_MOVE)}beginLine(){const n=this.viewer.scene,o=n.canvas;let t;this.handlers.has("line")?t=this.handlers.get("line"):(t=new m(o),this.handlers.set("line",t)),t.setInputAction(s=>{const r=w(s.position,n);if(r)console.log(r);else return},f.LEFT_CLICK)}beginPolygon(){const n=this.viewer.scene,o=n.canvas;let t;this.handlers.has("line")?t=this.handlers.get("line"):(t=new m(o),this.handlers.set("line",t)),t.setInputAction(s=>{const r=w(s.position,n);if(r)console.log(r);else return},f.LEFT_CLICK)}begin(e){switch(this.status=!0,this.drawType=e.type,e.type){case"point":this.beginPoint();break;case"line":this.beginLine();break;case"polygon":this.beginPolygon();break}return this}end(){this.status=!1,this.drawType=void 0,this.viewer.entities.removeById("movePoint");for(const[o,t]of this.handlers)t.destroy();for(const[o,t]of Object.entries(this.eventHandlers))t.forEach(s=>{s({})})}addEventListener(e,n){this.eventHandlers[e].push(n)}destroy(){this.status=!1,this.viewer.scene.globe.depthTestAgainstTerrain=this.oldDepthTestValue;for(const[e,n]of Object.entries(this.eventHandlers))n.length=0}}const ne=window.Cesium.Camera,se=window.Cesium.Rectangle,oe=()=>{ne.DEFAULT_VIEW_RECTANGLE=se.fromDegrees(75,0,140,60)};const ie=i=>(V("data-v-0a657164"),i=i(),N(),i),re=ie(()=>d("div",{id:"none-credit"},null,-1)),ae=window.Cesium.ImageryLayer,ce=window.Cesium.UrlTemplateImageryProvider,le=window.Cesium.Viewer,de=u({__name:"index",setup(i){const e=M(),n=b(),o="production",s="https://npm.elemecdn.com/cesium@1.105.0/Build/Cesium/";return window.CESIUM_BASE_URL=s,F(x,n),console.log(`模式: ${o}, CESIUM_BASE_URL: ${s}`),L(()=>{oe(),n.value=new le(e.value,{infoBox:!1,selectionIndicator:!1,msaaSamples:4,timeline:!1,animation:!1,sceneModePicker:!1,scene3DOnly:!0,baseLayer:new ae(new ce({url:"https://gac-geo.googlecnapps.cn/maps/vt/lyrs=s&hl=zh-CN&gl=cn&x={x}&y={y}&z={z}",maximumLevel:18}),{}),geocoder:!1,navigationHelpButton:!1,projectionPicker:!1,requestRenderMode:!0,creditContainer:"none-credit"})}),(r,C)=>(p(),y(H,null,[O(r.$slots,"router-view",{},void 0,!0),d("div",{id:"cesium-viewer",ref_key:"viewerDivRef",ref:e},null,512),re],64))}});const U=(i,e)=>{const n=i.__vccOpts||i;for(const[o,t]of e)n[o]=t;return n},ue=U(de,[["__scopeId","data-v-0a657164"]]),x=Symbol("CESIUM_VIEWER"),pe={id:"route-pane"},he={id:"nav"},_e=u({__name:"index",setup(i){const e=W();return(n,o)=>(p(),y("div",pe,[P(c($)),d("div",he,[d("button",{type:"button",onClick:o[0]||(o[0]=t=>c(e).push({path:"/"}))},"/"),d("button",{type:"button",onClick:o[1]||(o[1]=t=>c(e).push({path:"/test"}))},"/TestPane")])]))}});const me=U(_e,[["__scopeId","data-v-74d7121c"]]),fe=u({__name:"App",setup(i){return(e,n)=>(p(),z(c(ue),null,{"router-view":G(()=>[P(c(me))]),_:1}))}}),ve=u({__name:"index",setup(i){const e=D();return(n,o)=>(p(),y("div",null,T(String(c(e).name)),1))}}),we=u({__name:"index",setup(i){const e=K(x),n=b(),o=D();return L(()=>{e&&(n.value=new te(e.value),n.value.begin({type:"point"}))}),j(()=>{var t,s;(t=n.value)==null||t.end(),(s=n.value)==null||s.destroy()}),(t,s)=>(p(),y("div",null,T(String(c(o).name)),1))}}),ge="/zoucaa",ye=q({history:Q(ge),routes:[{path:"/",name:"Root",component:ve},{path:"/test",name:"Test",component:we}]});X(fe).use(ye).mount("#app");
